<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>globe</title>
		<style>
			#container {
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>

		<div id="container"></div>

	</body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
	<script src="./globe/three.js"></script>
	<script src="./globe/OrbitControls.js"></script>

	<script type="text/javascript">
	var scene = new THREE.Scene(); // Create a Three.js scene object.
    var camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 0.01, 1000); // Define the perspective camera's attributes.

    var renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor( 0xffffff );
	document.body.appendChild(renderer.domElement); // Append the WebGL viewport to the DOM.

    var geometry = new THREE.SphereGeometry(0.5, 32, 32);
    var material = new THREE.MeshPhongMaterial({
                map: THREE.ImageUtils.loadTexture('globe/earthmap.jpg'),
                bumpMap: THREE.ImageUtils.loadTexture('globe/earthbump.jpg'),
                bumpScale: 0.01,
                specularMap: THREE.ImageUtils.loadTexture('globe/water.png'),
                specular: new THREE.Color('gray')
            }); // Skin the cube with 100% blue.
    var cube = new THREE.Mesh(geometry, material); // Create a mesh based on the specified geometry (cube) and material (blue skin).
    scene.add(cube); // Add the cube at (0, 0, 0).
	
	var geometry2 = new THREE.SphereGeometry(0.505, 32, 32);
	var material2 = new THREE.MeshPhongMaterial({
			map: THREE.ImageUtils.loadTexture('globe/clouds.png'),
            transparent: true,
        });
		
	var cloudMesh = new THREE.Mesh(geometry2, material2);
	cube.add(cloudMesh);
    camera.position.z = 2; // Move the camera away from the origin, down the positive z-axis.
	 scene.add(new THREE.AmbientLight(0xffffff));

	var light = new THREE.DirectionalLight(0xffffff, 0.3);
	light.position.set(2,3,4);
	scene.add(light);
	
    var render = function () {
      cube.rotation.x += 0.0001; // Rotate the sphere by a small amount about the x- and y-axes.
      cube.rotation.y += 0.001;
	  
	  //cloudMesh.rotation.x += 0.001;
	  cloudMesh.rotation.y += 0.0005;

      renderer.render(scene, camera); // Each time we change the position of the cube object, we must re-render it.
      requestAnimationFrame(render); // Call the render() function up to 60 times per second (i.e., up to 60 animation frames per second).
    };

	controls = new THREE.OrbitControls( camera, renderer.domElement );
				//controls.addEventListener( 'change', render ); // add this only if there is no animation loop (requestAnimationFrame)
				controls.enableDamping = true;
				controls.dampingFactor = 1;
				controls.enableZoom = true;
	
    render(); // Start the rendering of the animation frames.
	
	</script>
</html>
